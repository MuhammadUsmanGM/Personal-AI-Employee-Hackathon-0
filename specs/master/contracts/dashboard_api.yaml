openapi: 3.0.0
info:
  title: Silver Tier Dashboard API
  description: API for enhanced dashboard functionality in Personal AI Employee Silver Tier
  version: 1.0.0
servers:
  - url: http://localhost:8000/api
    description: Development server

paths:
  /dashboard/status:
    get:
      summary: Get current system status
      description: Retrieve the current status of the AI Employee system
      responses:
        '200':
          description: Current system status
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [active, inactive, error]
                    description: Overall system status
                  active_agents:
                    type: integer
                    description: Number of active agent processes
                  tasks_processed_today:
                    type: integer
                    description: Number of tasks processed today
                  pending_approvals:
                    type: integer
                    description: Number of pending approval requests
                  system_uptime:
                    type: string
                    description: Duration the system has been running
                  last_update:
                    type: string
                    format: date-time
                    description: Last dashboard update timestamp

  /dashboard/analytics:
    get:
      summary: Get system analytics
      description: Retrieve analytical data about system performance
      parameters:
        - name: timeframe
          in: query
          required: false
          schema:
            type: string
            enum: [today, week, month, quarter, year]
            default: week
          description: Timeframe for analytics
        - name: granularity
          in: query
          required: false
          schema:
            type: string
            enum: [hourly, daily, weekly, monthly]
            default: daily
          description: Granularity of the analytics
      responses:
        '200':
          description: System analytics data
          content:
            application/json:
              schema:
                type: object
                properties:
                  timeframe:
                    type: string
                  metrics:
                    type: object
                    properties:
                      tasks_processed:
                        type: integer
                      approvals_granted:
                        type: integer
                      average_response_time:
                        type: number
                        format: float
                      success_rate:
                        type: number
                        format: float
                      user_satisfaction:
                        type: number
                        format: float
                      task_completion_by_category:
                        type: object
                        additionalProperties:
                          type: integer
                  trends:
                    type: object
                    properties:
                      improving:
                        type: boolean
                      percentage_change:
                          type: number
                          format: float

  /dashboard/tasks:
    get:
      summary: Get task overview
      description: Retrieve an overview of tasks in the system
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [all, pending, processing, completed, failed, awaiting_approval]
            default: all
          description: Filter tasks by status
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum: [all, email, file, calendar, crm, custom]
            default: all
          description: Filter tasks by category
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Limit number of results returned
      responses:
        '200':
          description: Task overview
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_tasks:
                    type: integer
                  tasks_by_status:
                    type: object
                    additionalProperties:
                      type: integer
                  tasks_by_category:
                    type: object
                    additionalProperties:
                      type: integer
                  recent_tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/TaskSummary'
                  next_scheduled:
                    type: array
                    items:
                      $ref: '#/components/schemas/TaskSummary'

  /dashboard/preferences:
    get:
      summary: Get user preferences
      description: Retrieve learned user preferences and settings
      responses:
        '200':
          description: User preferences
          content:
            application/json:
              schema:
                type: object
                properties:
                  preferences:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserPreference'
                  learning_confidence:
                    type: number
                    format: float
                  last_updated:
                    type: string
                    format: date-time

components:
  schemas:
    TaskSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        status:
          type: string
          enum: [pending, processing, completed, failed, awaiting_approval]
        category:
          type: string
        priority:
          type: string
          enum: [low, medium, high, critical]
        created_at:
          type: string
          format: date-time
        estimated_duration:
          type: integer
          description: Estimated duration in minutes

    UserPreference:
      type: object
      properties:
        id:
          type: string
          format: uuid
        preference_key:
          type: string
        preference_value:
          type: string
        preference_type:
          type: string
          enum: [behavioral, operational, security, communication]
        confidence_level:
          type: number
          format: float
        usage_count:
          type: integer
        effectiveness_score:
          type: number
          format: float